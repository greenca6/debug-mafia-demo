sudo: required

services: 
  - docker


jobs:
  include:
    - stage: "Build"
        - docker-compose build
    - stage: "Test"
      script:
        - docker-compose run --rm api ./gradlew test
        - docker-compose run --rm ui npm run test
    - stage: "Deploy"
      provider: heroku
      script: ./deploy.sh
